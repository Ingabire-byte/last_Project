(()=>{const e=(e,o,s)=>{var{contents:c,relateds:l,searchUrl:d}=e;o.blocks.forEach((e=>{var o=c.slice(0,e.amount);let u=e.element.getAttribute("data-position"),h=s||(e.element.hasAttribute("data-sharedid")?e.element.getAttribute("data-sharedid"):"");c=c.slice(e.amount);var m=l.slice(0,12);l=l.slice(12);const g="1"==e.showrelateds,y=e.element.getElementsByClassName("istock-block-item");if(o.forEach(((e,a)=>{const n=r(e.display_sizes);if(!n)return;const o=y[a],s=e.referral_destinations[0],c=i(s,u,"thumbs",h);t(o,c,n,e.title)})),d){const e=n(d,u,h);y[y.length-1].querySelector("a > span").appendChild(e)}if(g){const t=a(m,u,h);t&&e.element.parentElement.appendChild(t)}Array.from(y).forEach((e=>{e.addEventListener("click",(()=>function(e){const t=document.querySelector("#selected-option").getAttribute("data-value"),r=window.location.pathname,a={filetype:t,page_path:r};p(e.querySelector(".view-more")?"istock_view_more":"istock_thumbnail",a)}(e)))}))}))},t=(e,t,r,a)=>{e&&(e.querySelector("a").href=t,e.querySelector("a > span > picture > .istock-jpeg").srcset=r[0],e.querySelector("a > span > picture > .istock-webp").srcset=r[1],e.querySelector("a > span > picture > img").src=r[0],e.querySelector("a > span > picture > img").alt=a,e.querySelector("a > span > picture > img").onload=()=>{e.querySelector("a > span").classList.remove("animate-pulse","bg-gray-300")})},r=e=>{const t=["comp","comp_webp"],r=e.filter((e=>t.includes(e.name))).map((e=>e.uri));return r.length>0&&r},a=(e,t,r)=>{if(e.length<=0)return null;const a="related-searches"+(""!==t?"-"+t:""),n=document.getElementById(a);n.classList.add("my-2","px-2");const o=document.createElement("p");return o.innerHTML=ISTOCK_BLOCK_TRANSLATED_TEXTS[0],o.classList.add("text-gray-font"),e.forEach(((e,a)=>{const n=document.createElement("a");n.classList.add("bg-search-bar-border","border-2","border-search-bar-border","hover:border-gray-1","px-3","py-0.5","rounded-2xl","text-secondary","mr-2","mb-2","inline-block");const s=e.url;n.href=i(s,t,"related-searches",r),n.target="_blank",n.innerHTML=e.phrase,o.appendChild(n),n.addEventListener("click",(()=>function(e){const t=document.querySelector("#selected-option").getAttribute("data-value"),r=window.location.pathname;p("istock_related",{keyword:e,filetype:t,page_path:r})}(e.phrase)))})),n.appendChild(o),n},n=(e,t,r)=>{var a=document.createElement("a"),n=document.createElement("span"),l=document.createElement("p");return a.href=i(e,t,"view-more",r),a.target="_blank",l.appendChild(o()),l.appendChild(s()),l.appendChild(c()),l.classList.add("flex","flex-col","items-center","justify-center","text-white"),n.classList.add("z-10","view-more","absolute","top-0","right-0","w-full","h-full","bg-black","bg-opacity-60","flex","justify-center","items-center","rounded-lg"),a.appendChild(n),n.appendChild(l),a},o=()=>{var e=document.createElement("span");return e.innerText="+",e.classList.add("text-3xl","md:text-5xl"),e},s=()=>{var e=document.createElement("span");return e.innerText=ISTOCK_BLOCK_TRANSLATED_TEXTS[1],e},c=()=>{var e=document.createElement("span");return e.innerText="15% OFF",e.classList.add("border-2","inline-block","mt-2","px-2","rounded-full"),e},i=(e,t,r,a)=>{const n=new URL(e);let o=`${ISTOCK_PAGE_TYPE}_${ISTOCK_PRODUCT_TYPE}`;o=t||""!==t?`${o}_${t}-${r}`:`${o}_${r}`;const s=ISTOCK_AD_ID_DIRECT;return n.searchParams.set("adplacement",o),n.searchParams.set("sharedid",a),n.searchParams.set("adid",s),n.toString()},l=e=>{var t={};e.forEach((e=>{var r=e.getAttribute("data-keyword"),a=e.getAttribute("data-amount"),n=e.getAttribute("data-orientation"),o=e.getAttribute("data-showrelateds"),s=e.getAttribute("data-keywordalternative"),c=e.getAttribute("data-sharedid");r=r||"";try{a=a?parseInt(a):10}catch(e){a=10}const i={amount:a,orientation:n,showrelateds:o,element:e,sharedid:c};t[r]?(t[r].totalAmount+=a,t[r].blocks.push(i)):t[r]={totalAmount:a,blocks:[i],keywordAlternative:s}}));var r=[];for(const[e,a]of Object.entries(t))r.push({keyword:e,totalAmount:a.totalAmount,blocks:a.blocks,keywordAlternative:a.keywordAlternative});return r},d=async(e,t,r,a=1)=>{const n=window.location.href.split("/")[3];var o="";o=n&&AVAILABLE_LANGUAGES_FOLDERS.includes(n)?n:"en-US";var s=(a-1)*Math.ceil(r/30);s+=1;for(var c={contents:[],relateds:[],searchUrl:""},i=0;c.contents.length<r&&!(++i>10);){var l="https://geoapi.freeimages.com/istock/search/?"+new URLSearchParams({phrase:e,page:s,page_size:30,graphical_styles:ISTOCK_BLOCK_GS,lang:o});s++;try{await fetch(l,{referrerPolicy:"origin"}).then((function(e){return e.json()})).then((function(r){var{error:a,data:n}=r;a||(c.contents.push(...n.results),c.relateds.push(...n.related_searches),c.searchUrl=n.search_url),c.contents.length<=0&&t&&(e=t)})).catch((function(e){console.warn("Something went wrong.",e)}))}catch(e){console.warn("Something went wrong.",e)}}return c},u=async e=>{var t={contents:[],relateds:[],searchUrl:""};const r=`/photo-similar/${e}`;try{await fetch(r,{referrerPolicy:"origin"}).then((function(e){return e.json()})).then((function(e){var{error:r,data:a}=e;r||t.contents.push(...a.results)})).catch((function(e){console.warn("Something went wrong.",e)}))}catch(e){console.warn("Something went wrong.",e)}return t},h=e=>{var t=(e=>{var t=[],r=e.length,a="";return e.forEach((e=>{""==a&&(a=e.getAttribute("data-keyword"));var r=e.getAttribute("data-sharedid");const n={element:e,sharedid:r};t.push(n)})),{keyword:a,total:r,images:t}})(e),a=1;try{a=ACTUAL_PAGE}catch(e){}d(t.keyword,null,t.total,a).then((e=>{var a=e.contents;t.images.forEach((e=>{if(a.length>=1){var t=a.pop(),n=r(t.display_sizes);if(!n)return;m(e,t,n)}}))})).catch((e=>{console.warn("Something went wrong.",e)}))},m=(e,t,r)=>{const a=t.max_dimensions.width,n=t.max_dimensions.height;e.element.style=`--width: ${a}; --height: ${n};`;const o=e.element.querySelector(".istock-a-tag"),s=e.element.querySelector(".grid-article").querySelector(".istock-grid-overlay-title"),c=t.referral_destinations[0],l=encodeURIComponent(e.sharedid);o.href=i(c,null,"inline-popup",l);e.element.querySelector(".istock-img-tag > .istock-webp").srcset=r[1];e.element.querySelector(".istock-img-tag > .istock-jpeg").srcset=r[0];const d=e.element.querySelector(".istock-img-tag > img");d.style.height="",d.classList.add("h-full"),d.src=r[0],d.alt=t.title,s.innerHTML=t.title};function p(e,t){void 0!==window.dataLayer?(window.dataLayer=window.dataLayer||[],dataLayer.push({event:e,...t})):console.error("Data layer not found. Make sure the dataLayer object is defined.")}(async()=>{var t=document.querySelectorAll(".istock-block");l(t).forEach((t=>{var r=1;try{r=ACTUAL_PAGE}catch(e){}"undefined"!=typeof ISTOCK_BLOCK_SBI&&"False"!=ISTOCK_BLOCK_SBI?u(PREVIEW_ID).then((r=>{e(r,t)})):d(t.keyword,t.keywordAlternative,t.totalAmount,r).then((r=>e(r,t)))}));var r=document.querySelectorAll(".istock-random");null!=r&&h(r)})()})();